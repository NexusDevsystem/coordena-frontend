<!DOCTYPE html>
<html lang="pt-BR">

<head>
  <meta charset="UTF-8" />
  <title>Painel de Administração</title>

  <!-- Bootstrap 5 CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet" />

  <!-- Seu CSS personalizado -->
  <link rel="stylesheet" href="/assets/css/admin.css" />
</head>

<body class="bg-gray-100">
  <!-- Proteção de rota (apenas admin) -->
  <script>
    const storedAdminUser = localStorage.getItem('admin_user');
    const storedAdminToken = localStorage.getItem('admin_token');
    if (!storedAdminUser || !storedAdminToken) {
      alert('Sessão do Admin expirada. Faça login novamente.');
      window.location.replace('/login.html');
    } else {
      try {
        const userObj = JSON.parse(storedAdminUser);
        if (userObj.role !== 'admin') {
          window.location.replace('/');
        }
      } catch {
        localStorage.removeItem('admin_user');
        localStorage.removeItem('admin_token');
        window.location.replace('/login.html');
      }
    }

    const BASE_API = window.location.hostname.includes('localhost')
      ? 'http://localhost:10000'
      : 'https://coordena-backend.onrender.com';
  </script>

  <div class="container py-5">
    <div class="bg-primary text-white rounded-3 p-4 mb-4">
      <h1 class="h3 mb-0"><i class="fas fa-user-shield me-2"></i>Painel de Administração</h1>
      <p class="mb-0">Gerencie solicitações de usuários e reservas</p>
    </div>

    <!-- Nav‐tabs: Usuários Pendentes / Reservas Pendentes -->
    <ul class="nav nav-tabs mb-3" id="adminTab" role="tablist">
      <li class="nav-item" role="presentation">
        <button class="nav-link active" id="usuarios-tab" data-bs-toggle="tab" data-bs-target="#usuarios" type="button"
          role="tab" aria-controls="usuarios" aria-selected="true">
          <i class="fas fa-user"></i> Usuários Pendentes
        </button>
      </li>
      <li class="nav-item" role="presentation">
        <button class="nav-link" id="reservas-tab" data-bs-toggle="tab" data-bs-target="#reservas" type="button"
          role="tab" aria-controls="reservas" aria-selected="false">
          <i class="fas fa-calendar-alt"></i> Reservas Pendentes
        </button>
      </li>
    </ul>

    <div class="tab-content" id="adminTabContent">
      <!-- ABA: Usuários Pendentes -->
      <div class="tab-pane fade show active" id="usuarios" role="tabpanel" aria-labelledby="usuarios-tab">
        <div class="row mb-3">
          <div class="col-md-8">
            <div class="search-box position-relative">
              <input type="text" id="busca-usuarios" class="form-control ps-4"
                placeholder="Buscar usuário por nome ou email..." />
              <i class="fas fa-search position-absolute"
                style="top:50%; right:15px; transform: translateY(-50%); color:#6c757d;"></i>
            </div>
          </div>
          <div class="col-md-4">
            <select id="ordenacao-usuarios" class="form-select">
              <option value="createdAt">Ordem de Chegada</option>
              <option value="name">Nome (A-Z)</option>
              <option value="email">Email (A-Z)</option>
            </select>
          </div>
        </div>
        <!-- Container ajustado para casar com o JavaScript -->
        <div id="lista-usuarios-pendentes"></div>
      </div>

      <!-- ABA: Reservas Pendentes -->
      <div class="tab-pane fade" id="reservas" role="tabpanel" aria-labelledby="reservas-tab">
        <div class="row mb-3">
          <div class="col-md-8">
            <div class="search-box position-relative">
              <input type="text" id="busca-reservas" class="form-control ps-4"
                placeholder="Buscar reserva por lab ou requisitante..." />
              <i class="fas fa-search position-absolute"
                style="top:50%; right:15px; transform: translateY(-50%); color:#6c757d;"></i>
            </div>
          </div>
          <div class="col-md-4">
            <!-- Campo de filtro de data -->
            <input type="date" id="filtro-data-reservas" class="form-control mb-2" placeholder="Data" />
            <!-- Select de ordenação, para corresponder ao JS -->
            <select id="ordenacao-reservas" class="form-select">
              <option value="date">Data</option>
              <option value="responsible">Requisitante (A-Z)</option>
            </select>
          </div>
        </div>
        <!-- Container ajustado para casar com o JavaScript -->
        <div id="lista-reservas-pendentes"></div>
      </div>
    </div>
  </div>

  <!-- Bootstrap Bundle JS (inclui Popper) -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <!-- importa todo o JS consolidado -->
  <script src="../assets/js/main.js"></script>
</body>

</html>
